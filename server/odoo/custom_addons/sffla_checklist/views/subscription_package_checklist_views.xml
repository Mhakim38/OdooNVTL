<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_subscription_package_form_inherit_interview_checklist" model="ir.ui.view">
        <field name="name">subscription.package.form.inherit.interview.checklist</field>
        <field name="model">subscription.package</field>
        <field name="inherit_id" ref="subscription_package.subscription_package_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook/page[.//field[@name='verify_checklist_ids']]" position="after">
                <field name="stage_category" invisible="1"/>

                <!-- Interview Checklist Tab-->
                <page string="Interview Notes" name="interview_checklist" readonly="stage_category != 'interview'">
                    <separator string="Items / Note"></separator>
                        <field name="interview_checklist_ids" readonly="stage_category != 'interview'">
                            <tree editable="bottom">
                                <field name="name"/>
                                <field name="employee_id"/>
                                <field name="attachment_file" filename="attachment_filename" widget="binary"/>
                                <field name="is_done"/>
                            </tree>
                            <!-- keep filename field invisible outside the tree -->
                            <form>
                                <sheet>
                                    <group>
                                        <field name="attachment_filename" invisible="1"/>
                                    </group>
                                </sheet>
                            </form>
                        </field>


                    <!-- Minutes of Meeting Tab -->
                    <group string="Minute Meeting">
                    <group>
                        <group>
                            <field name="responsible_user_id" readonly="stage_category != 'interview'"/>
                        </group>
                        <group>
                            <field name="note_taker_id" readonly="stage_category != 'interview'"/>
                        </group>
                    </group>
                    <group>
                        <field name="absent_member_ids" widget="many2many_tags" readonly="stage_category != 'interview'"/>
                    </group>
                    <group>
                        <field name="partner_ids" widget="many2many_tags" readonly="stage_category != 'interview'"/>
                    </group>
                    <label for="agenda_ids" string="Agenda"/>
                    <field name="agenda_ids" readonly="stage_category != 'interview'">
                        <tree string="Agenda" editable="bottom">
                            <field name="topic"/>
                            <field name="description"/>
                            <field name="is_discussed"/>
                        </tree>
                    </field>
                    <br/>
                    <label for="actions_ids" string="Actions/ Decisions"/>
                    <field name="actions_ids" readonly="stage_category != 'interview'">
                        <tree string="Actions / Decisions" editable="bottom">
                            <field name="action"/>
                            <field name="description"/>
                            <field name="agenda_item_id" domain="[('id', 'in', parent.agenda_ids)]"/>
                            <field name="responsible_partner_id" domain="[('id', 'in', parent.partner_ids)]"/>
                            <field name="assigned_partner_ids" widget="many2many_tags" domain="[('id', 'in', parent.partner_ids)]"/>
                            <field name="deadline"/>
                        </tree>
                    </field>
                    <br/>
                    <br/>
                    <group string="Conclusion Notes">
                        <field name="notes" placeholder="Conclusion notes" readonly="stage_category != 'interview'"/>
                    </group>
                    <field name="is_user" invisible="1"/>
                    <button name="action_send_mail" string="Send Meeting Minutes to Attendees"
                            type="object" icon="fa-paper-plane" invisible="not is_user"/>
                    </group>
                </page>

            </xpath>
        </field>
    </record>
</odoo>
