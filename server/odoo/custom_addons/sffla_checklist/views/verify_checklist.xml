<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Subscription Package Form with Verify Checklist -->
    <record id="view_subscription_package_form_checklist" model="ir.ui.view">
        <field name="name">subscription.package.form.checklist</field>
        <field name="model">subscription.package</field>
        <field name="inherit_id" ref="subscription_package.subscription_package_view_form"/>
        <field name="arch" type="xml">

            <!-- Verified button in header -->
            <xpath expr="//header" position="inside">
                <field name="all_verify_done" invisible="1"/>
                <button name="action_verified"
                        string="Verified"
                        type="object"
                        class="btn-success"
                        save_before="true"
                        invisible="not all_verify_done or stage_category != 'verify'"/>
            </xpath>

            <!-- Verify Checklist tab -->
            <xpath expr="//sheet/notebook" position="inside">
                <page string="Verify Checklist">
                    <field name="verify_checklist_ids"
                           context="{'default_subscription_id': active_id}"
                           readonly="stage_category != 'verify'">
                        <tree editable="bottom">
                            <field name="name"/>
                            <field name="employee_id"/>
                            <field name="is_done"/>
                        </tree>
                        <form>
                            <sheet>
                                <group>
                                    <field name="name"/>
                                    <field name="employee_id"/>
                                    <field name="is_done"/>
                                </group>
                            </sheet>
                        </form>
                    </field>
                </page>
            </xpath>

        </field>
    </record>
</odoo>
