<odoo>
    <template id="portal_layout_no_breadcrumb" inherit_id="portal.portal_layout">
        <xpath expr="//t[@t-call='portal.portal_breadcrumbs']" position="replace"/>
    </template>


    <!-- Partner Tab-->
<template id="portal_my_partner" name="Portal Partner Tab Page">
    <t t-call="portal.portal_layout">
        <div class="container mt16">
            <!-- Navbar -->
            <t t-call="sffla_portal_detail.portal_nav"/>

            <h2 class="mb-4">My Details</h2>

            <!-- Warning Alerts -->
            <t t-if="partner.same_vat_partner_id">
                <div class="alert alert-warning">
                    A partner with the same <b>Tax ID</b> already exists
                    (<t t-esc="partner.same_vat_partner_id.name"/>)
                </div>
            </t>
            <t t-if="partner.same_company_registry_partner_id">
                <div class="alert alert-warning">
                    A partner with the same <b>Company Registry</b> already exists
                    (<t t-esc="partner.same_company_registry_partner_id.name"/>)
                </div>
            </t>

            <!-- Partner Info Card (Merged with Contacts & Addresses) -->
            <div class="card shadow-sm mb-3">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><t t-esc="partner.name"/></h5>
                </div>
                <div class="card-body">
                    <table class="table table-sm">
                        <tr>
                            <th style="width:220px;">Tax ID</th>
                            <td><t t-esc="partner.vat or ''"/></td>
                        </tr>
                        <tr>
                            <th>Membership Number</th>
                            <td><t t-esc="partner.membership_number or ''"/></td>
                        </tr>
                        <tr>
                            <th>Registration Address</th>
                            <td><t t-esc="partner.reg_full_address or ''"/></td>
                        </tr>
                        <tr>
                            <th>Business Address</th>
                            <td><t t-esc="partner.biz_full_address or ''"/></td>
                        </tr>
                        <tr>
                            <th>Job Position</th>
                            <td><t t-esc="partner.function or ''"/></td>
                        </tr>
                        <tr>
                            <th>Phone</th>
                            <td><t t-esc="partner.phone or ''"/></td>
                        </tr>
                        <tr>
                            <th>Mobile</th>
                            <td><t t-esc="partner.mobile or ''"/></td>
                        </tr>
                        <tr>
                            <th>Email</th>
                            <td><t t-esc="partner.email or ''"/></td>
                        </tr>
                        <tr>
                            <th>Circular Email</th>
                            <td><t t-esc="partner.circular_email or ''"/></td>
                        </tr>
                        <tr>
                            <th>Website</th>
                            <td><t t-esc="partner.website or ''"/></td>
                        </tr>
                        <tr>
                            <th>Title</th>
                            <td><t t-esc="partner.title.name or ''"/></td>
                        </tr>
                        <tr>
                            <th>Tags</th>
                            <td>
                                <t t-if="partner.category_id">
                                    <t t-foreach="partner.category_id" t-as="tag">
                                        <span class="badge bg-secondary me-1"><t t-esc="tag.name"/></span>
                                    </t>
                                </t>
                                <t t-else="">-</t>
                            </td>
                        </tr>
                    </table>

                    <!-- Contacts & Addresses (inside the same card) -->
                    <h5 class="mt-4">Contacts &amp; Addresses</h5>
                    <t t-if="partner.child_ids">
                        <ul class="list-group mb-3">
                            <t t-foreach="partner.child_ids" t-as="child">
                                <li class="list-group-item">
                                    <b><t t-esc="child.name"/></b><br/>
                                    <t t-esc="child.function or ''"/><br/>
                                    <t t-esc="child.email or ''"/> |
                                    <t t-esc="child.phone or ''"/> |
                                    <t t-esc="child.mobile or ''"/>
                                </li>
                            </t>
                        </ul>
                    </t>
                    <t t-else="">
                        <p class="text-muted">No contacts added.</p>
                    </t>
                </div>
            </div>
        </div>
    </t>
</template>



    <odoo>
    <!-- Kastam Tab -->
    <template id="portal_my_kastam" name="Portal Kastam Tab Page">
        <t t-call="portal.portal_layout">
            <div class="container mt16">
                <t t-call="sffla_portal_detail.portal_nav"/>
                <h2 class="mb-4">Kastam &amp; Company Details</h2>

                <div class="card shadow-sm">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">Kastam Details</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <!-- Left Column -->
                            <div class="col-lg-6 col-12">
                                <table class="table table-sm">
                                    <tr>
                                        <th>Registration Number</th>
                                        <td><t t-esc="partner.kastam_registration_number or '-'"/></td>
                                    </tr>
                                    <tr>
                                        <th>Expiry Date</th>
                                        <td><t t-esc="partner.expiry_date or '-'"/></td>
                                    </tr>
                                </table>
                            </div>

                            <!-- Right Column -->
                            <div class="col-lg-6 col-12">
                                <h6>Kastam Attachments</h6>
                                <ul>
                                    <li t-if="partner.approval_letter">
                                        <a t-att-href="'/web/content/res.partner/%s/approval_letter?download=true' % partner.id">Approval Letter</a><br/>
                                        <img t-att-src="'/web/image/res.partner/%s/approval_letter' % partner.id"
                                             class="img-thumbnail mt-2"
                                             style="width:100%; height:300px; object-fit:contain;" />
                                    </li>
                                    <li t-if="partner.audited_account">
                                        <a t-att-href="'/web/content/res.partner/%s/audited_account?download=true' % partner.id">Audited Account</a><br/>
                                        <img t-att-src="'/web/image/res.partner/%s/audited_account' % partner.id"
                                             class="img-thumbnail mt-2"
                                             style="width:100%; height:300px; object-fit:contain;" />
                                    </li>
                                    <li t-if="partner.roc_rob">
                                        <a t-att-href="'/web/content/res.partner/%s/roc_rob?download=true' % partner.id">ROC/ROB</a><br/>
                                        <img t-att-src="'/web/image/res.partner/%s/roc_rob' % partner.id"
                                             class="img-thumbnail mt-2"
                                             style="width:100%; height:300px; object-fit:contain;" />
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>



    <!-- Services Tab -->
    <template id="portal_my_services" name="Portal Services Tab Page">
        <t t-call="portal.portal_layout">
            <div class="container mt16">
                <t t-call="sffla_portal_detail.portal_nav"/>
                <h2 class="mb-4">Services</h2>

                <div class="card shadow-sm">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0">Services (Active)</h5>
                    </div>
                    <div class="card-body">
                        <t t-if="active_services">
                            <div class="row">
                                <t t-foreach="active_services" t-as="srv">
                                    <div class="col-lg-6 col-12 mb-2">
                                        <div class="d-flex justify-content-between">
                                            <span class="fw-bold"><t t-esc="srv[0]"/>:</span>
                                            <span class="text-success">âœ” Active</span>
                                        </div>
                                    </div>
                                </t>
                            </div>
                        </t>
                        <t t-else="">
                            <p class="text-muted">No active services found.</p>
                        </t>
                    </div>
                </div>
            </div>
        </t>
    </template>


    <!-- SSM Tab -->
    <template id="portal_my_ssm" name="Portal SSM Tab Page">
        <t t-call="portal.portal_layout">
            <div class="container mt16">
                <t t-call="sffla_portal_detail.portal_nav"/>
                <h2 class="mb-4">SSM Details</h2>

                <div class="card shadow-sm">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">SSM Details</h5>
                    </div>
                    <div class="card-body">
                        <table class="table table-sm mb-4">
                            <tr><th>Incorporation Date</th><td><t t-esc="partner.incorporation_date or '-'"/></td></tr>
                            <tr><th>Company Reg No</th><td><t t-esc="partner.company_reg_no or '-'"/></td></tr>
                            <tr><th>Business Entity</th><td><t t-esc="partner.business_entity or '-'"/></td></tr>
                            <tr><th>Authorized Capital</th><td><t t-esc="partner.authorized_capital or '-'"/></td></tr>
                            <tr><th>Paid Up Capital</th><td><t t-esc="partner.paid_up_capital or '-'"/></td></tr>
                            <tr><th>Malaysia Bank</th><td><t t-esc="partner.malaysia_bank or '-'"/></td></tr>
                            <tr><th>Registration Address</th><td><t t-esc="partner.registration_address or '-'"/></td></tr>
                            <tr><th>Auth Rep 1</th><td><t t-esc="partner.auth_rep_1 or '-'"/></td></tr>
                            <tr><th>Auth Rep 2</th><td><t t-esc="partner.auth_rep_2 or '-'"/></td></tr>
                        </table>

                        <h6>SSM Documents</h6>
                        <div class="row">
                            <div class="col-lg-6 col-12" t-if="partner.form_9">
                                <a t-att-href="'/web/content/res.partner/%s/form_9?download=true' % partner.id">Form 9</a><br/>
                                <img t-att-src="'/web/image/res.partner/%s/form_9' % partner.id" class="img-thumbnail mt-2" style="width:100%; height:300px; object-fit:contain;" />
                            </div>
                            <div class="col-lg-6 col-12" t-if="partner.form_13">
                                <a t-att-href="'/web/content/res.partner/%s/form_13?download=true' % partner.id">Form 13</a><br/>
                                <img t-att-src="'/web/image/res.partner/%s/form_13' % partner.id" class="img-thumbnail mt-2" style="width:100%; height:300px; object-fit:contain;" />
                            </div>
                            <div class="col-lg-6 col-12" t-if="partner.form_49">
                                <a t-att-href="'/web/content/res.partner/%s/form_49?download=true' % partner.id">Form 49</a><br/>
                                <img t-att-src="'/web/image/res.partner/%s/form_49' % partner.id" class="img-thumbnail mt-2" style="width:100%; height:300px; object-fit:contain;" />
                            </div>
                            <div class="col-lg-6 col-12" t-if="partner.form_24">
                                <a t-att-href="'/web/content/res.partner/%s/form_24?download=true' % partner.id">Form 24</a><br/>
                                <img t-att-src="'/web/image/res.partner/%s/form_24' % partner.id" class="img-thumbnail mt-2" style="width:100%; height:300px; object-fit:contain;" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <!-- Membership Tab -->
    <template id="portal_my_membership" name="Portal Membership Tab Page">
        <t t-call="portal.portal_layout">
            <div class="container mt16">
                <!-- Navbar -->
                <t t-call="sffla_portal_detail.portal_nav"/>

                <h2 class="mb-4">Membership</h2>

                <t t-if="memberships">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Membership Number</th>
                                <th>Membership Type</th>
                                <th>Membership Start</th>
                                <th>Membership End</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="memberships" t-as="mem">
                                <tr>
                                    <td><t t-esc="partner.membership_number or ''"/></td>
                                    <td><t t-esc="mem.package_id.member_type or ''"/></td>
                                    <td><t t-esc="mem.package_id.date_started or ''"/></td>
                                    <td><t t-esc="mem.package_id.next_invoice_date or ''"/></td>
                                    <td><t t-esc="mem.state or ''"/></td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </t>
                <t t-else="">
                    <p class="text-muted">No membership found.</p>
                </t>
            </div>
        </t>
    </template>
</odoo>
